'use strict';$(".search-table").on("keyup",function(){var a,b,c,d,e,f,g;for(a=$(this).val(),b=a.toUpperCase(),c=$(this).closest(".table-auto"),d=$(this).closest(".table-auto").find("tbody tr"),f=0;f<d.length;f++)e=d[f].querySelector(".search"),e&&(g=e.textContent||e.innerText,d[f].style.display=-1<g.toUpperCase().indexOf(b)?"":"none")}),$(".countries-tb").html(`
    <ul class="addon-form-loading pt-160">
        <div id="addon-res-loader">
            <svg class="" id="loading-spinner" width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle id="loading-circle-large" cx="40" cy="40" r="36" stroke="#FCCA19" stroke-width="8"></circle>
            </svg>
        </div>
    </ul>
`),$.ajax({url:SITE_URL+"/countries",type:"GET",dataType:"JSON",success:function(a){var b="";for(const c in a)b+=`
                <tr>
                    <td class="search py-2 px-3 d-flex justify-content-between">
                        <div>
                            <span class="text-dark font-weight-bold">${a[c].name} <small class="text-uppercase">(${a[c].code})</small></span>
                        </div>
                        <div class="action-button">
                            <form method="post" action="country/delete/${a[c].id}" id="delete-country-${a[c].id}" accept-charset="UTF-8" class="display_inline">
                                    <input type="hidden" name="_token" value="${token}">
                                    <span title="${jsLang("Delete")}"
                                        data-id="${a[c].id}"
                                        data-label="Delete" data-delete="country"
                                        data-bs-toggle="modal"
                                        data-bs-target="#confirmDelete"
                                        data-title="${jsLang("Delete Country")}"
                                        data-message="${jsLang("Are you sure to delete this?")}">
                                        <i class="fa fa-trash delete"></i>
                                    </span>
                                </form>
                                <span title="${jsLang("Edit")}"
                                    class="edit-country"
                                    data-id="${a[c].id}"
                                    data-name="${a[c].name?a[c].name:""}"
                                    data-fullName="${a[c].full_name?a[c].full_name:""}"
                                    data-capital="${a[c].capital?a[c].capital:""}"
                                    data-code="${a[c].code?a[c].code:""}"
                                    data-codeAlpha3="${a[c].code_alpha3?a[c].code_alpha3:""}"
                                    data-codeNumeric="${a[c].code_numeric?a[c].code_numeric:""}"
                                    data-emoji="${a[c].emoji?a[c].emoji:""}"
                                    data-currencyCode="${a[c].currency_code?a[c].currency_code:""}"
                                    data-currencyName="${a[c].currency_name?a[c].currency_name:""}"
                                    data-currencySymbol="${a[c].currency_symbol?a[c].currency_symbol:""}"
                                    data-tld="${a[c].tld?a[c].tld:""}"
                                    data-callingCode="${a[c].callingcode?a[c].callingcode:""}"
                                    data-bs-toggle="modal"
                                    data-bs-target="#edit-country">
                                    <i class="fa fa-edit edit"></i>
                                </span>
                            <span class="find-state find-city cursor_pointer" data-countryId data-ciso="${a[c].id}" data-code="${a[c].id}">
                                <svg viewBox="0 0 20 20" fill="currentColor" class="arrow-circle-right neg-transition-scale">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"></path>
                                </svg>
                            </span>
                        </div>
                    </td>
                </tr>
            `;$(".countries-tb").html(b)}});var country_code=null;$(document).on("click",".find-state",function(){$(".add-city").css("display","inline"),$(".add-state").css("display","inline"),$(".action-button").hide(),$(this).closest("tbody").find("tr").css("background","unset"),$(this).closest("tr").css("background","#ddd"),country_code=$(this).attr("data-code"),$("#add-city input[name=\"country_id\"]").val(country_code),$("#add-state input[name=\"country_id\"]").val(country_code),$(".states-tb").html(`
        <ul class="addon-form-loading pt-160">
            <div id="addon-res-loader">
                <svg class="" id="loading-spinner" width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle id="loading-circle-large" cx="40" cy="40" r="36" stroke="#FCCA19" stroke-width="8"></circle>
                </svg>
            </div>
        </ul>
    `),$(".cities-tb").html(`
        <tr>
            <td class="search py-2 px-3 d-flex justify-content-between">
                <div>
                    <span class="text-dark font-weight-bold">${jsLang("Start typing to search")}</span>
                </div>
            </td>
        </tr>
    `),$.ajax({url:SITE_URL+"/countries/"+country_code+"/states",type:"GET",dataType:"JSON",success:function(a){$(".action-button").show(),$(".cities-tb").html(`
                <tr>
                    <td class="search py-2 px-3 d-flex justify-content-between">
                        <div>
                            <span class="text-dark font-weight-bold">${jsLang("Start typing to search")}</span>
                        </div>
                    </td>
                </tr>
            `);var b="";for(const c in 0===a.data.length&&(b+=`
                    <tr>
                        <td class="search py-2 px-3 d-flex justify-content-between">
                            <div>
                                <span class="font-weight-bold text-warning">${jsLang("The country has no state. Select different one.")}</span>
                            </div>
                        </td>
                    </tr>
                `),a.data)b+=`
                    <tr>
                        <td class="search py-2 px-3 d-flex justify-content-between">
                            <div>
                                <span class="text-dark font-weight-bold">${a.data[c].name} <small>(${a.data[c].code})</small></span>
                            </div>
                            <div class="action-button">
                                <form method="post" action="state/delete/${a.data[c].id}" id="delete-state-${a.data[c].id}" accept-charset="UTF-8" class="display_inline">
                                    <input type="hidden" name="_token" value="${token}">
                                    <span title="${jsLang("Delete")}"
                                        data-id="${a.data[c].id}"
                                        data-label="Delete"
                                        data-delete="state"
                                        data-bs-toggle="modal"
                                        data-bs-target="#confirmDelete"
                                        data-title="${jsLang("Delete State")}"
                                        data-message="${jsLang("Are you sure to delete this?")}">
                                        <i class="fa fa-trash delete"></i>
                                    </span>
                                </form>
                                <span title="${jsLang("Edit")}"
                                    class="edit-state"
                                    data-id="${a.data[c].id}"
                                    data-countryId="${a.data[c].country_id}"
                                    data-name="${a.data[c].name}"
                                    data-fullName="${a.data[c].full_name}"
                                    data-code="${a.data[c].code}"
                                    data-bs-toggle="modal"
                                    data-bs-target="#edit-state">
                                    <i class="fa fa-edit edit"></i>
                                </span>
                                <span class="find-city cursor_pointer" data-ciso="${country_code}" data-siso="${a.data[c].id}">
                                    <svg viewBox="0 0 20 20" fill="currentColor" class="arrow-circle-right neg-transition-scale">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"></path>
                                    </svg>
                                </span>
                            </div>
                        </td>
                    </tr>
                `;$(".states-tb").html(b)}})}),$(document).on("click",".find-city",function(){$(".add-city").css("display","inline"),$(".action-button").hide(),setTimeout(()=>{$(".action-button").show()},500),$(this).closest("tbody").find("tr").css("background","unset"),$(this).closest("tr").css("background","#ddd");var a=$(this).attr("data-siso"),b=$(this).attr("data-ciso");$("#add-city input[name=\"country_id\"]").val(b),$("#add-city input[name=\"division_id\"]").val(a),$(".cities-tb").html(`
        <tr>
            <td class="search py-2 px-3 d-flex justify-content-between">
                <div>
                    <span class="text-dark font-weight-bold">${jsLang("Start typing to search")}</span>
                </div>
            </td>
        </tr>
    `),$(".search-cities").val("")});var debounce=null;$(document).on("input",".search-cities",function(){var a=$("#add-city input[name=\"country_id\"]").val(),b=$("#add-city input[name=\"division_id\"]").val();if(""===a&&""===b||""===$(this).val().trim())return void $(".cities-tb").html(`<tr>
            <td class="search py-2 px-3 d-flex justify-content-between">
                <div>
                    <span class="font-weight-bold text-dark">${jsLang("Start typing to search")}</span>
                </div>
            </td>
        </tr>`);var c=SITE_URL+"/countries/"+a+"/cities?search="+$(this).val();""!==b&&(c=SITE_URL+"/countries/"+a+"/states/"+b+"/cities?search="+$(this).val()),$(".cities-tb").html(`
        <ul class="addon-form-loading pt-160">
            <div id="addon-res-loader">
                <svg class="" id="loading-spinner" width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle id="loading-circle-large" cx="40" cy="40" r="36" stroke="#FCCA19" stroke-width="8"></circle>
                </svg>
            </div>
        </ul>
    `),clearTimeout(debounce),debounce=setTimeout(function(){$.ajax({url:c,type:"GET",dataType:"JSON",success:function(a){$(".action-button").show();var b="";for(const c in 0===a.data.length&&(b+=`
                        <tr>
                            <td class="search py-2 px-3 d-flex justify-content-between">
                                <div>
                                    <span class="font-weight-bold text-warning">${jsLang("No city found.")}</span>
                                </div>
                            </td>
                        </tr>
                    `),a.data)b+=`
                        <tr>
                            <td class="search py-2 px-3 d-flex justify-content-between">
                                <div>
                                    <span class="text-dark font-weight-bold">${a.data[c].name}</span>
                                </div>
                                <div class="action-button">
                                    <form method="post" action="city/delete/${a.data[c].id}" id="delete-city-${a.data[c].id}" accept-charset="UTF-8" class="display_inline">
                                        <input type="hidden" name="_token" value="${token}">
                                        <span title="${jsLang("Delete")}"
                                            data-id="${a.data[c].id}"
                                            data-label="Delete" data-delete="city"
                                            data-bs-toggle="modal"
                                            data-bs-target="#confirmDelete"
                                            data-title="${jsLang("Delete City")}"
                                            data-message="${jsLang("Are you sure to delete this?")}">
                                            <i class="fa fa-trash delete"></i>
                                        </span>
                                    </form>
                                    <span title="${jsLang("Edit")}"
                                        class="edit-city"
                                        data-countryId="${a.data[c].country_id}"
                                        data-divisionId="${a.data[c].division_id}"
                                        data-name="${a.data[c].name}"
                                        data-fullName="${a.data[c].full_name}"
                                        data-code="${a.data[c].code}"
                                        data-ianaTimezone="${a.data[c].iana_timezone}"
                                        data-id="${a.data[c].id}"
                                        data-bs-toggle="modal"
                                        data-bs-target="#edit-city">
                                        <i class="fa fa-edit edit"></i>
                                    </span>
                                </div>
                            </td>
                        </tr>
                    `;$(".cities-tb").html(b)}})},500)}),$(document).on("click",".edit-city",function(){var a={country_id:"null"==$(this).attr("data-countryId")?"":$(this).attr("data-countryId"),division_id:"null"==$(this).attr("data-divisionId")?"":$(this).attr("data-divisionId"),name:"null"==$(this).attr("data-name")?"":$(this).attr("data-name"),full_name:"null"==$(this).attr("data-fullName")?"":$(this).attr("data-fullName"),code:"null"==$(this).attr("data-code")?"":$(this).attr("data-code"),iana_timezone:"null"==$(this).attr("data-ianaTimezone")?"":$(this).attr("data-ianaTimezone")};for(const b in a)$("#edit-city").find("#"+b).val(a[b]),$("#edit-city").find("form").attr("action","city/update/"+$(this).attr("data-id"))}),$(document).on("click",".edit-state",function(){var a={country_id:"null"==$(this).attr("data-countryId")?"":$(this).attr("data-countryId"),name:"null"==$(this).attr("data-name")?"":$(this).attr("data-name"),full_name:"null"==$(this).attr("data-fullName")?"":$(this).attr("data-fullName"),code:"null"==$(this).attr("data-code")?"":$(this).attr("data-code")};for(const b in a)$("#edit-state").find("#"+b).val(a[b]),$("#edit-state").find("form").attr("action","state/update/"+$(this).attr("data-id"))}),$(document).on("click",".edit-country",function(){var a={name:"null"==$(this).attr("data-name")?"":$(this).attr("data-name"),full_name:"null"==$(this).attr("data-fullName")?"":$(this).attr("data-fullName"),capital:"null"==$(this).attr("data-capital")?"":$(this).attr("data-capital"),code:"null"==$(this).attr("data-code")?"":$(this).attr("data-code"),code_alpha3:"null"==$(this).attr("data-codeAlpha3")?"":$(this).attr("data-codeAlpha3"),code_numeric:"null"==$(this).attr("data-codeNumeric")?"":$(this).attr("data-codeNumeric"),emoji:"null"==$(this).attr("data-emoji")?"":$(this).attr("data-emoji"),currency_code:"null"==$(this).attr("data-currencyCode")?"":$(this).attr("data-currencyCode"),currency_name:"null"==$(this).attr("data-currencyName")?"":$(this).attr("data-currencyName"),currency_symbol:"null"==$(this).attr("data-currencySymbol")?"":$(this).attr("data-currencySymbol"),tld:"null"==$(this).attr("data-tld")?"":$(this).attr("data-tld"),callingcode:"null"==$(this).attr("data-callingCode")?"":$(this).attr("data-callingCode")};for(const b in a)$("#edit-country").find("#"+b).val(a[b]),$("#edit-country").find("form").attr("action","country/update/"+$(this).attr("data-id"))});
