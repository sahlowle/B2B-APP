"use strict";if($(".main-body .page-wrapper").find("#currency-setting-container").length){function a(){$("#currency_form").trigger("reset")}$(".select2").select2({placeholder:jsLang("Nothing selected"),allowClear:!0}),$(document).on("init.dt",function(){$(".dataTables_length").remove(),$("#currencyDataTable").removeAttr("style"),$("#currencyDataTable_filter").remove()});var formId=0,formType="";(function(a,b){$(a).DataTable({columnDefs:[{targets:b,orderable:!1}],language:{url:app_locale_url},pageLength:parseInt(row_per_page),order:[[0,"asc"]]})})("#currencyDataTable",[4]);var exchangeResource={"exchangerate-api":"(https://www.exchangerate-api.com)"};setTimeout(()=>{$("#exchange_resource").trigger("change")},1e3),$(document).on("click",".tab-name",function(){let a=$(this).attr("data-id"),b=$(this).attr("data-type");$("#header_title").text(a),"currency"==b?($("#add_currency").removeClass("display-none"),$("#update_exchange_all").removeClass("display-none")):($("#add_currency").addClass("display-none"),$("#update_exchange_all").addClass("display-none"))}),$(document).on("click","#add_currency",function(){var b=$(this).attr("data-action");$("#currency_form").attr("action",b),a(),$("#currency_method").val("post")}),$(document).on("change","#exchange_resource",function(){$("#exchange_url").text(exchangeResource[$(this).val()]??null)}),$(document).on("click",".edit_currency",function(){var b=$(this).attr("data-url"),c=$(this).attr("data-action");$("#currency_form").attr("action",c);var d=$(this).attr("id");a(),$("#currency_method").val("put"),$.ajax({url:b,data:{id:d,_token:token},type:"get",dataType:"JSON",success:function(a){1==a.status&&($("#currency_id").val(a.records.currency_id).trigger("change"),$("#exchange_rate").val(a.records.exchange_rate),$("#allow_decimal_number").val(a.records.allow_decimal_number),$("#custom_symbol").val(a.records.custom_symbol))}})}),$(document).on("click",".delete_currency",function(){formId=$(this).attr("data-id")}),$("#confirmDeleteSubmitBtn").on("click",function(){$("#delete-currency-"+formId).submit()}),$("#update_exchange_all").on("click",function(){var a=$(this).attr("data-action");$.ajax({url:a,type:"POST",data:{_token:token,update_type:"all"},beforeSend:function(){$(".custom_loader").replaceWith("<div class=\"spinner-border spinner-border-sm ml-2 custom_loader\" role=\"status\"></div>")},success:function(a){1==a.status?location.href=redirectRoute:($(".custom_loader").replaceWith("<span class=\"feather icon-download-cloud custom_loader\">&nbsp;</span>"),b("alert-danger",jsLang("Update failed!")))},error:function(){$(".custom_loader").replaceWith("<span class=\"feather icon-download-cloud custom_loader\">&nbsp;</span>"),b("alert-danger",jsLang("Update failed!"))}})}),$(".update_exchange_single").on("click",function(){var a=$(this).attr("data-action");let c=$(this).attr("data-id");$.ajax({url:a,type:"POST",data:{_token:token,update_type:"single",multi_currency_id:c},beforeSend:function(){$(".custom_loader_"+c).replaceWith("<div class=\"spinner-border spinner-border-sm ml-2 custom_loader_"+c+"\" role=\"status\"></div>")},success:function(a){1==a.status?($("#exchnage-rate-"+c).html(a.exchange_rate),$(".custom_loader_"+c).replaceWith("<i class=\"feather icon-download-cloud custom_loader_"+c+"\"></i>"),b("alert-success",jsLang("Successfully Updated"))):($(".custom_loader_"+c).replaceWith("<i class=\"feather icon-download-cloud custom_loader_"+c+"\"></i>"),b("alert-danger",jsLang("Update failed!")))},error:function(){$(".custom_loader_"+c).replaceWith("<i class=\"feather icon-download-cloud custom_loader_"+c+"\"></i>"),b("alert-danger",jsLang("Update failed!"))}})});const b=(a,b)=>{$(".notification-msg-bar").find(".notification-msg").html(b),$(".notification-msg-bar").removeClass("smoothly-hide"),setTimeout(()=>{$(".notification-msg-bar").addClass("smoothly-hide"),$(".notification-msg-bar").find(".notification-msg").html("")},1500)};$(document).on("keyup",".positive-float-number",function(){(0==$(this).val()||0>this.val())&&$(this).val("")})}
