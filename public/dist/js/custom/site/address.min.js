"use strict";let radioSwitch=!1;$(".radio-test").on("click",function(){$(".radio-error-msg").hide(),radioSwitch=!0}),$(".save-add-func").on("click",function(){radioSwitch?$(".radio-error-msg").hide():$(".radio-error-msg").show()});function formValidation(){return!(0<$(".addressForm").find(".error").length)&&($("#btnSubmit").attr("disabled","true"),!0)}$(document).ready(function(){function a(a){a?($("#state").html(""),"null"==oldCity&&$("#city").html(d),$.ajax({url:SITE_URL+"/geo-locale/countries/"+a+"/states",type:"GET",dataType:"json",beforeSend:function(){$("#state").attr("disabled","true"),$("#state").html(c)},success:function(a){$("#state").html(e),$.each(a.data,function(a,b){$("#state").append(`'<option ${b.code==oldState?"Selected":""} data-state="${b.code}" value="${b.code}">${b.name}</option>'`)}),$("#state").removeAttr("disabled"),0>=a.length&&0>=a.data.length&&(f=f.replace(":x","State"),$("#state").html(`<option value="">${f}</option>`))}})):($("#state").html(e),$("#city").html(d))}function b(a,b){if("null"==oldCity&&$("#city").html(d),null!==b&&"null"!==b){var c=SITE_URL+"/admin/countries/"+b+"/cities";void 0!==a&&""!==a&&null!=a&&(c=SITE_URL+"/geo-locale/countries/"+b+"/states/"+a+"/cities"),$("#city").select2({ajax:{url:c,dataType:"json",delay:250,data:function(a){return{search:a.term,page:a.page}},processResults:function(a){var b=[];return $.each(a.data,function(a,c){b.push({id:c.name,text:c.name})}),{results:b}},cache:!0},placeholder:jsLang("Start typing to search"),minimumInputLength:1})}}$(".addressSelect").select2(),$(document).on("select2:open",a=>{const b=a.target.id;$(".select2-search__field[aria-controls='select2-"+b+"-results']").each(function(a,b){b.focus()})});let c=`<option value="">${jsLang("Loading")}...</option>`,d=`<option value="">${jsLang("Select City")}</option>`,e=`<option value="">${jsLang("Select State")}</option>`,f=jsLang(":x is not available.");b($("#state").find(":selected").attr("data-state"),oldCountry),$(".address-form , .checkout-address-form").find("#addressForm").length&&$.ajax({url:SITE_URL+"/geo-locale/countries",type:"GET",dataType:"json",beforeSend:function(){$("#country").html(c),$("#country").attr("disabled","true")},success:function(a){$("#country").html("<option value=\"\">"+jsLang("Select Country")+"</option>"),$.each(a,function(a,b){$("#country").append(`'<option  ${b.code==oldCountry?"selected":""} data-country="${b.code}" value="${b.code}">${b.name}</option>'`)}),$("#country").removeAttr("disabled")}}),"null"!=oldState&&a(oldCountry),$("#country").on("change",function(){let c=$(this).find(":selected").html();if(oldCity="null",0<c.length){let a=this.closest(".validSelect");a.querySelector(".addressSelect").setCustomValidity(""),a.querySelector(".error")&&a.querySelector(".error").remove()}a($("#country").find(":selected").attr("data-country")),b($("#state").find(":selected").attr("data-state"),$("#country").find(":selected").attr("data-country"))}),$("#state").on("change",function(){let a=$(this).find(":selected").html();if(0<a.length){let a=this.closest(".validSelect");a.querySelector(".addressSelect").setCustomValidity(""),a.querySelector(".error")&&a.querySelector(".error").remove()}b($("#state").find(":selected").attr("data-state"),$("#country").find(":selected").attr("data-country"))}),$("#city").on("change",function(){let a=$(this).find(":selected").html();if(0<a.length){let a=this.closest(".validSelect");a.querySelector(".addressSelect").setCustomValidity(""),a.querySelector(".error")&&a.querySelector(".error").remove()}})});
